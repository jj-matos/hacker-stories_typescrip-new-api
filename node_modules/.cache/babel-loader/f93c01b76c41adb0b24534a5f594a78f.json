{"ast":null,"code":"import _asyncToGenerator from\"/home/joao/Documents/02_MIND/05_IT/00_PROJECTS/my-hacker-news_typescript+new-api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/joao/Documents/02_MIND/05_IT/00_PROJECTS/my-hacker-news_typescript+new-api/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/joao/Documents/02_MIND/05_IT/00_PROJECTS/my-hacker-news_typescript+new-api/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/home/joao/Documents/02_MIND/05_IT/00_PROJECTS/my-hacker-news_typescript+new-api/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import _regeneratorRuntime from\"/home/joao/Documents/02_MIND/05_IT/00_PROJECTS/my-hacker-news_typescript+new-api/node_modules/@babel/runtime/regenerator/index.js\";//#######\n//Imports\n//#######\nimport*as React from'react';import axios from'axios';import{SearchForm}from'./SearchForm.tsx';import{List}from'./List.tsx';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";//#######\n//Styling\n//#######\nvar StyledContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  height: 100vw;\\n  padding: 20px;\\n  background: #83a4d4;\\n  background: linear-gradient(to left, #b6fbff, #83a4d4);\\n  color:#171212;\\n\"])));var StyledHeadlinePrimary=styled.h1(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-size: 48px;\\n  font-weight: 300;\\n  letter-spacing: 2px;\\n\"])));//#########################################################################\n//Constants, Variables & Functions definition defined outside App component\n//#########################################################################\n//========================================\n//Fetching data url with stories id's list\n//========================================\nvar API_ENDPOINT='https://hacker-news.firebaseio.com/v0/topstories.json';//===============================================\n//Saves searchTerm on local storage (Client Side)\n//===============================================\nvar useSemiPersistentState=function useSemiPersistentState(key,initialState){var _React$useState=React.useState(localStorage.getItem(key)||initialState),_React$useState2=_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];React.useEffect(function(){localStorage.setItem(key,value);console.log('Search (input) value saved on local storage:');console.log(localStorage.getItem(key)||initialState);},[value,key]);console.log('return from useSemiPersistentState');console.log(value);return[value,setValue];};//=========================\n//Manages App state changes\n//=========================\nvar storiesReducer=function storiesReducer(state,action){switch(action.type){case'STORIES_FETCH_INIT':return _objectSpread(_objectSpread({},state),{},{isLoading:true,isError:false});case'STORIES_FETCH_SUCCESS':console.log('storiesReducer called. State update: data');console.log(action.payload);return _objectSpread(_objectSpread({},state),{},{isLoading:false,isError:false,data:action.payload});case'STORIES_FETCH_FAILURE':return _objectSpread(_objectSpread({},state),{},{isLoading:false,isError:true});case'REMOVE_STORY':console.log(action.payload);console.log(state.data);return _objectSpread(_objectSpread({},state),{},{data:state.data.filter(function(story){return action.payload.id!==story.data.id;})});default:throw new Error();}};//#############\n//App component\n//#############\nvar App=function App(){console.log('App renders');//=====\n//Hooks\n//=====\nvar _useSemiPersistentSta=useSemiPersistentState('search','React'),_useSemiPersistentSta2=_slicedToArray(_useSemiPersistentSta,2),searchTerm=_useSemiPersistentSta2[0],setSearchTerm=_useSemiPersistentSta2[1];/*const [sortOption, setSortOption] = useSemiPersistentState(\n    'sort',\n    ''\n  );*/var _React$useState3=React.useState(\"\".concat(API_ENDPOINT)),_React$useState4=_slicedToArray(_React$useState3,2),url=_React$useState4[0],setUrl=_React$useState4[1];var _React$useReducer=React.useReducer(storiesReducer,{data:[],isLoading:false,isError:false}),_React$useReducer2=_slicedToArray(_React$useReducer,2),stories=_React$useReducer2[0],dispatchStories=_React$useReducer2[1];//===========================================================================================\n//Fetches individual stories by id, stores them in an array, and updates data in the app state\n//===========================================================================================\nvar getAsyncStories=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fetchedIdList){var storiesArray;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('Promise called:');console.log(fetchedIdList.data);storiesArray=[];_context2.next=5;return Promise.all(fetchedIdList.data.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item){var story;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://hacker-news.firebaseio.com/v0/item/\".concat(item,\".json\"));case 2:story=_context.sent;storiesArray.push(story);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()));case 5:console.log('Dispaching:');console.log(storiesArray);dispatchStories({type:'STORIES_FETCH_SUCCESS',payload:storiesArray});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function getAsyncStories(_x){return _ref.apply(this,arguments);};}();//===================================================\n// Fetches stories id's list from API, \n// following an url change or an event,\n// and updates state data with individual items array\n// referenced to the id's in the initial id's list\n//===================================================\nvar handleFetchStories=React.useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var fetchedIdList;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatchStories({type:'STORIES_FETCH_INIT'});_context3.prev=1;_context3.next=4;return axios.get(url);case 4:fetchedIdList=_context3.sent;console.log('Data fetched:');console.log(fetchedIdList.data);_context3.next=9;return getAsyncStories(fetchedIdList);case 9:console.log('Data changed in state');//This useEffect doesn't work here. Gives an error - Why?\n/*React.useEffect(() => {\n          getAsyncStories().then(result => {\n            console.log(1);\n            dispatchStories({\n              type: 'STORIES_FETCH_SUCCESS',\n              payload: result.stories.data,\n            });\n          });\n      },[]);\n\n      //This one also not - Why?\n            /*React.useEffect(() => {\n        console.log(Test use.Effect);\n      },[]);*/_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);dispatchStories({type:'STORIES_FETCH_FAILURE'});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[1,12]]);})),[url]);React.useEffect(function(){handleFetchStories();},[handleFetchStories]);/*const handleSort = (\n    event: React.ChangeEvent<HTMLButtonElement>\n   ) => {\n    setSortOption(sortOption);\n  };*/ //===============================================\n//Changes searchTerm following input field change\n//===============================================\nvar handleSearchInput=function handleSearchInput(event){setSearchTerm(event.target.value);console.log('setSearchTerm called');};//================================\n//Removes story from rendered list\n//================================\nvar handleRemoveStory=function handleRemoveStory(item){dispatchStories({type:'REMOVE_STORY',payload:item});};//=========================================\n// Handles submit button click triggers:\n// - Fetches id list from url\n// - \n//=========================================\nvar handleSearchSubmit=function handleSearchSubmit(event){handleFetchStories();event.preventDefault();};/*const setSort = React.useCallback(()) => {\n    const [sort, setSort] = React.useState ([]);\n\n    <List\n      list={stories.data}\n      sortList={sortType}\n      onRemoveItem={handleRemoveStory}\n    />\n  }\n  \n  React.useEffect(()) => {\n    setSort()\n  }, [setSort]);*/ //===========\n//renders App\n//===========\nreturn/*#__PURE__*/_jsxs(StyledContainer,{children:[console.log(stories.data),console.log(stories.isLoading),/*#__PURE__*/_jsx(StyledHeadlinePrimary,{children:\"My Hacker Stories\"}),/*#__PURE__*/_jsx(SearchForm,{searchTerm:searchTerm,onSearchInput:handleSearchInput,onSearchSubmit:handleSearchSubmit}),/*#__PURE__*/_jsx(\"hr\",{}),stories.isError&&/*#__PURE__*/_jsx(\"p\",{children:\"Something went wrong ...\"}),console.log(stories.isLoading),stories.isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading ...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[console.log(stories.data),/*#__PURE__*/_jsx(List,{list:stories.data,searchTerm:searchTerm,onRemoveItem:handleRemoveStory})]})]});};//#######\n//Exports\n//#######\nexport default App;export{storiesReducer,SearchForm,List};","map":{"version":3,"sources":["/home/joao/Documents/02_MIND/05_IT/00_PROJECTS/my-hacker-news_typescript+new-api/src/App.tsx"],"names":["React","axios","SearchForm","List","styled","StyledContainer","div","StyledHeadlinePrimary","h1","API_ENDPOINT","useSemiPersistentState","key","initialState","useState","localStorage","getItem","value","setValue","useEffect","setItem","console","log","storiesReducer","state","action","type","isLoading","isError","payload","data","filter","story","id","Error","App","searchTerm","setSearchTerm","url","setUrl","useReducer","stories","dispatchStories","getAsyncStories","fetchedIdList","storiesArray","Promise","all","map","item","get","push","handleFetchStories","useCallback","handleSearchInput","event","target","handleRemoveStory","handleSearchSubmit","preventDefault"],"mappings":"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","sourcesContent":["//#######\n//Imports\n//#######\nimport * as React from 'react';\nimport axios from 'axios';\n\nimport { SearchForm } from './SearchForm.tsx';\nimport { List } from './List.tsx';\n\nimport styled from 'styled-components';\n\nimport { ReactComponent as Check } from './check.svg';\n\n//#######\n//Styling\n//#######\nconst StyledContainer = styled.div`\n  height: 100vw;\n  padding: 20px;\n  background: #83a4d4;\n  background: linear-gradient(to left, #b6fbff, #83a4d4);\n  color:#171212;\n`;\n\nconst StyledHeadlinePrimary = styled.h1`\n  font-size: 48px;\n  font-weight: 300;\n  letter-spacing: 2px;\n`;\n\n//#########################################################################\n//Constants, Variables & Functions definition defined outside App component\n//#########################################################################\n\n//========================================\n//Fetching data url with stories id's list\n//========================================\nconst API_ENDPOINT = 'https://hacker-news.firebaseio.com/v0/topstories.json';\n\n//===============================================\n//Saves searchTerm on local storage (Client Side)\n//===============================================\ninterface StoriesFetchInitAction {\n  type: 'STORIES_FETCH_INIT';\n}\n\ninterface StoriesFetchSuccessAction {\n  type: 'STORIES_FETCH_SUCCESS';\n  payload: Stories;\n}\n\ninterface StoriesFetchFailureAction {\n  type: 'STORIES_FETCH_FAILURE';\n}\n\ninterface StoriesRemoveAction {\n  type: 'REMOVE_STORY';\n  payload: Story;\n}\n\ntype StoriesAction = \n  | StoriesFetchInitAction\n  | StoriesFetchSuccessAction\n  | StoriesFetchFailureAction\n  | StoriesRemoveAction;\n\nconst useSemiPersistentState = (\n  key: string,\n  initialState: string\n ): [string, (newValue: string) => void] => {\n  const [value, setValue] = React.useState(\n    localStorage.getItem(key) || initialState\n  );\n\n  React.useEffect(() => {\n    localStorage.setItem(key, value);\n    console.log('Search (input) value saved on local storage:');\n    console.log(localStorage.getItem(key) || initialState);\n  }, [value, key]);\n  \n  console.log('return from useSemiPersistentState');\n  console.log(value);\n  return [value, setValue];\n};\n\n//=========================\n//Manages App state changes\n//=========================\ntype StoriesState = {\n  data: Stories;\n  isLoading: boolean;\n  isError: boolean;\n};\n\nconst storiesReducer = (\n  state: StoriesState,\n  action: StoriesAction\n) => {\n  switch (action.type) {\n    case 'STORIES_FETCH_INIT':\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      };\n    case 'STORIES_FETCH_SUCCESS':\n      console.log('storiesReducer called. State update: data');\n      console.log(action.payload);\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        data: action.payload,\n      };\n    case 'STORIES_FETCH_FAILURE':\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case 'REMOVE_STORY':\n      console.log(action.payload);\n      console.log(state.data);\n      return {\n        ...state,\n        data: state.data.filter(\n          (story) => action.payload.id !== story.data.id\n        ),\n      };\n    default:\n      throw new Error();\n  }\n};\n\n//#############\n//App component\n//#############\nconst App = () => {\n  console.log('App renders');\n\n//=====\n//Hooks\n//=====\n  const [searchTerm, setSearchTerm] = useSemiPersistentState(\n    'search',\n    'React'\n  );\n  \n /*const [sortOption, setSortOption] = useSemiPersistentState(\n    'sort',\n    ''\n  );*/\n\n  const [url, setUrl] = React.useState(\n    `${API_ENDPOINT}`\n  );\n\n  const [stories, dispatchStories] = React.useReducer(\n    storiesReducer,\n    { data: [], isLoading: false, isError: false }\n  );\n\n//===========================================================================================\n//Fetches individual stories by id, stores them in an array, and updates data in the app state\n//===========================================================================================\n  const getAsyncStories = async (fetchedIdList) => {\n    console.log('Promise called:');\n    console.log(fetchedIdList.data);\n    \n    const storiesArray = [];\n\n    await Promise.all (\n      fetchedIdList.data.map(\n        async (item) => {\n          const story = await axios.get(`https://hacker-news.firebaseio.com/v0/item/${item}.json`);\n          storiesArray.push(story);\n        }\n      )\n    )\n    console.log('Dispaching:');\n    console.log(storiesArray);\n\n    dispatchStories({\n      type: 'STORIES_FETCH_SUCCESS',\n      payload: storiesArray,\n    });\n\n  };\n\n//===================================================\n// Fetches stories id's list from API, \n// following an url change or an event,\n// and updates state data with individual items array\n// referenced to the id's in the initial id's list\n//===================================================\n  const handleFetchStories = React.useCallback(async () => {\n    dispatchStories({ type: 'STORIES_FETCH_INIT' });\n\n    try {\n      const fetchedIdList = await axios.get(url);\n      console.log('Data fetched:');\n      console.log(fetchedIdList.data);\n\n      await getAsyncStories(fetchedIdList);\n      console.log('Data changed in state');\n\n      //This useEffect doesn't work here. Gives an error - Why?\n            /*React.useEffect(() => {\n          getAsyncStories().then(result => {\n            console.log(1);\n            dispatchStories({\n              type: 'STORIES_FETCH_SUCCESS',\n              payload: result.stories.data,\n            });\n          });\n      },[]);\n\n      //This one also not - Why?\n            /*React.useEffect(() => {\n        console.log(Test use.Effect);\n      },[]);*/\n\n\n    } catch (error) {\n      dispatchStories({ type: 'STORIES_FETCH_FAILURE' });\n    }\n  }, [url]);\n\n  React.useEffect(() => {\n    handleFetchStories();\n    }, [handleFetchStories]);\n\n  /*const handleSort = (\n    event: React.ChangeEvent<HTMLButtonElement>\n   ) => {\n    setSortOption(sortOption);\n  };*/\n\n//===============================================\n//Changes searchTerm following input field change\n//===============================================\n  const handleSearchInput = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setSearchTerm(event.target.value);\n    console.log('setSearchTerm called');\n  };\n\n//================================\n//Removes story from rendered list\n//================================\n  const handleRemoveStory = (item: Story) => {\n    \n    dispatchStories({\n      type: 'REMOVE_STORY',\n      payload: item,\n    });\n  };\n\n//=========================================\n// Handles submit button click triggers:\n// - Fetches id list from url\n// - \n//=========================================\n  const handleSearchSubmit = (\n   event: React.FormEvent<HTMLFormElement>\n  ) => {\n    handleFetchStories();\n\n    event.preventDefault();\n  };\n\n  /*const setSort = React.useCallback(()) => {\n    const [sort, setSort] = React.useState ([]);\n\n    <List\n      list={stories.data}\n      sortList={sortType}\n      onRemoveItem={handleRemoveStory}\n    />\n  }\n  \n  React.useEffect(()) => {\n    setSort()\n  }, [setSort]);*/\n\n//===========\n//renders App\n//===========\n  return (\n    <StyledContainer>\n      {console.log(stories.data)}\n      {console.log(stories.isLoading)}\n      <StyledHeadlinePrimary>My Hacker Stories</StyledHeadlinePrimary>\n\n      <SearchForm\n        searchTerm={searchTerm}\n        onSearchInput={handleSearchInput}\n        onSearchSubmit={handleSearchSubmit}\n      />\n\n      <hr />\n      {stories.isError && <p>Something went wrong ...</p>}\n      {console.log(stories.isLoading)}\n      {stories.isLoading ? (\n        <p>Loading ...</p>\n      ) : (\n        <>\n        {console.log(stories.data)}\n        <List\n          list={stories.data}\n          searchTerm={searchTerm}\n          onRemoveItem={handleRemoveStory}\n        />\n        </>\n      )}\n    </StyledContainer>\n  );\n};\n\n//#######\n//Exports\n//#######\nexport default App;\n\nexport { storiesReducer, SearchForm, List};\n\n"]},"metadata":{},"sourceType":"module"}